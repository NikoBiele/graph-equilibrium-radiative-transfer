# The Exchange Factor Transformation

## Introduction

Similarly to Hottel's method, outlined in chapter @sec-matrixmethods, the exchange factor transformation of the present work starts from the exchange area matrix.
But unlike Hottel's method, which works directly with the exchange area matrix, the proposed transformation uses its non-dimensional counterpart, the *exchange factor* matrix, where each entry of the exchange area matrix has been divided by its equivalent area of emission.
Before solving a specific problem, the proposed method apply a matrix transformation to augment the exchange factor matrix with additional information about the steady state of reflection and scattering in the domain.

The transformation of the exchange factor matrix into an augmented form is partly inspired by the "F-hat" method developed by Beckman [@Beckman1968], which extends the view factor matrix for a transparent enclosure to include reflections.
Further analysis revealed that the 'F-hat' method only includes single reflections and does not account for multiple reflections.
The effective reflection-scattering coefficients of multiple reflection-scattering processes on general domains are functions of extinction and geometry, which seemingly made the problem impossible to solve.
However, as will be demonstrated in this paper, the problem is neither intractable nor impossible to solve.
In fact, it has a closed form analytical solution.

Given the availability of an analytically derived matrix of exchange factors, generally referred to as the matrix $\mathbf{F}$, the entire solution is analytical.
Thanks to Narayanaswamy [@Narayanaswamy2015], who found a general analytical solution to equation (@eq-excfact_ss) with $\overline{t}(S)=1$, this is possible for any convex enclosure composed of polygon surfaces and a transparent medium, giving perfect solutions to multiple reflection systems, which would otherwise be represented by coupled Fredholm equations of the second kind [@Minkowycz1988], the single assumption being that angular distributions of emission and reflection are identical.

For problems involving participating media ($\overline{t}(S)<1$), analytical solutions to the multi-dimensional integrals of equations (@eq-excfact_ss)-(@eq-excfact_gg) have yet to be found.
In this case, one might employ Monte Carlo methods to obtain near-analytical estimates of $\mathbf{F}$.
To ensure that $\mathbf{F}$ satisfies both The First and The Second Law of Thermodynamics, smoothing should be employed, such as for example the method proposed by Daun et al. [@Daun2005], or preferably the method proposed in this work.

The solution method proposed in this work is general and, furthermore, it is flexible.
In fact, a key strength of matrix-based methods for solution of the RTE, is that they allow the formidable monolithic problem of energy transfer by an electromagnetic wave field, to be broken down into two conceptually separate and more manageable parts:
The geometry and extinction-based ray propagation part and the system-wide energy interaction part.
If $\mathbf{F}$ is obtained through Monte Carlo ray tracing methods, any number of relevant optical phenomena may be modelled, such as refraction and diffraction, refraction being significant in atmospheric research, due to the variable refractive index.
This can be achieved by solving differential equations for each ray [@BornWolf1980].
Since the proposed transformation records only ray trajectory endpoints, it is in some sense blind to the phenomena which govern the trajectories, which explains why the matrix transformations of the present work will preserve any modelled ray trajectory properties.

For the proposed transformation, since $\mathbf{F}$ refers only to the first interaction, Monte Carlo methods used to obtain $\mathbf{F}$ can be truncated after this initial interaction, making them computationally less demanding than basic Monte Carlo implementations that must track multiple reflection-scattering events [@HowellDaun2021].
This will be increasingly true for higher single reflection-scattering coefficients due to the increased length of the ray paths.
Instead, the proposed transformation performs the multiple reflection-scattering ray tracing analytically using solution of linear systems.
This approach offers key advantages:

(1) It significantly improves computational efficiency compared to basic ray tracing methods for multiple reflection-scattering,
(2) It provides analytical ray tracing accuracy with quantifiable bounds on the necessary numerical precision,
(3) The precision requirements are expressed as a function of both the geometry and extinction (described by $\mathbf{F}$) and the reflection and scattering properties of each element.

This enables problem-specific numerical precision tuning which is readily implementable in modern numerical programming languages [@IEEEfloat2019].